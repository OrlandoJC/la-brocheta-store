(()=>{"use strict";const t=class{constructor(t,e,r,s=[],a,o="",i){this.id=t,this.name=e,this.description=r,this.ingredients=s,this.price=a,this.category=o,this.imgCode=i}},e=new class{constructor(){this.store=new class{constructor(){this.products=[]}find(t){return this.products.find((e=>e.id==t))}includes(t){return find(t).length>0}insertProduct(t){this.products=[...this.products,t]}getItem(t){return this.find(t)}getAllProducts(){return this.products}len(){return this.products.length}filterByCategory(t){return this.products.filter((e=>e.category===t))}filterByName(t){return this.products.filter((e=>e.name.toLowerCase().startsWith(t)))}},this.cart=new class{constructor(){this.products=[],this.pay=0,this.total=0}setProducts(t){this.products=[...t]}processPay(t){this.pay<this.getTotal()&&t("ERROR",{}),this.pay>=this.getTotal()&&t("SUCCESS",{change:this.pay-this.getTotal()})}setPay(t){this.pay=t}getTotal(){return this.products.reduce(((t,e)=>t+e.price),0)}reset(){this.products=[],this.pay=0}addItem(t){this.exists(t.id)?this.products=this.products.map((e=>e.id==t.id?{...e,number:e.number+1}:e)):this.products=[...this.products,{...t,number:1}]}deleteItem(t){this.products=this.products.filter((e=>e.id!=t))}get(){return this.products}find(t){return this.products.find((e=>e.id==t))}getItem(t){return this.find(t)}hasItems(){return this.products.length>0}size(){return this.products.reduce(((t,e)=>t+e.number),0)}exists(t){return!!this.products.find((e=>e.id===parseInt(t)))}incrementAmount(t){this.products.find((e=>e.id===parseInt(t)))}getLastItem(){return this.products[this.products.length-1]}totalPrice(){return this.products.reduce(((t,e)=>t+e.price),0)}},this.store.insertProduct(new t(1,"Tribu Pack","Platillo perfecto para compartir y disfrutar de nuevos sabores",[],259,"entrada","b1a3ef04e36442fecbfdad3f23d041fa")),this.store.insertProduct(new t(2,"QUESADILLAS B√öFALO","DQuesadilla elaborada a base de queso gouda rallado.",[],100,"entradas","e22fd5e0c31b7225357bc2e2cd14c60f")),this.store.insertProduct(new t(3,"DEDOS DE POLLO (6PZAS)","eliciosos 180 gr de pechuga de pollo empanizada..",[],240,"entrada")),this.store.insertProduct(new t(4,"POLLO PARMESANO","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsa, corrupti.",[],300,"entrada")),this.store.insertProduct(new t(5,"ENSALADA C√âSAR","Lechuga larga aderezada al estilo c√©sar con croutones y queso parmesano..",[],110,"ensaladas")),this.store.insertProduct(new t(6,"ENSALADA LEMON","Rica mezcla de lechugas, granos de elotes, aguacate, frituras de ma√≠z, zanahoria rayada, col morada",[],1,"ensaladas")),this.store.insertProduct(new t(7,"FUSILLI ARRABIATA","Rica pasta al dente, salteada con aceitunas negras, ajo, cebolla y tocino, con un toque de salsa de tomate",[],12,"")),this.store.insertProduct(new t(8,"CHEESE BURGER","180gr Carne la parrilla con tocino, queso cheddar, cebolla, pepinillo, tomate y lechuga.",[],33,""))}cardMarkup({id:t,name:e,description:r,price:s}){return`\n            <div class="card" data-product-id = ${t}>\n                <div class="card__image">\n                    <img src="https://picsum.photos/600/400?random=${t}" alt="">\n                </div>\n\n                <div class="card__info">\n                    <h3 class="card__title">${e}</h3>\n                    <p class="card__paragraph">${r}</p>\n                    <span> <b>$ ${s}.00</b> </span>\n                </div>\n                <span class="card__button-add"><i class="fa-solid fa-plus"></i></span>\n            </div>\n        `}cartItemMarkup({name:t,price:e,id:r,number:s}){return`\n            <div class="cart__item" data-cart-id = ${r}>\n                <div class="cart__info">\n                <img src="https://picsum.photos/600/400?random=${r}" alt="">\n                    <div>\n                        <p> ${s} x 1 ${t}</p>\n                        <span> <b>$ </b> ${s*e}</span>\n\n                    </div>\n                </div>\n                <span class="delete">\n                    <i class="fa-solid fa-trash-can"></i>\n                </span>\n            </div>\n        `}renderItemsAt(t,e){this.clearAt(e);for(const r of t)e.innerHTML+=this.cardMarkup(r)}renderStoreAt(t){this.clearAt(t),this.localExists("cart")&&this.renderCartFromLocal();for(const e of this.store.getAllProducts())t.innerHTML+=this.cardMarkup(e)}getLocal(){return JSON.parse(localStorage.getItem("cart"))}setLocal(t){localStorage.setItem("cart",JSON.stringify(t))}addToCart(t){const e=this.store.getItem(t);this.cart.addItem(e),this.setLocal(this.cart.products)}removeFromCart(t){this.cart.deleteItem(t),this.setLocal(this.cart.products)}removeFromCartUI(t,e){e.removeChild(t)}filterByUI(t,e){let r="todo"===t?this.store.getAllProducts():this.store.filterByCategory(t);this.renderItemsAt(r,e)}filterByName(t){return this.store.filterByName(t)}addToCartFromUi(t,e,r){this.cart.getLastItem(),t.textContent=this.cart.size(),e.innerHTML="";for(let t of this.cart.get())e.innerHTML+=this.cartItemMarkup(t)}renderCartFromLocal(){const t=this.getLocal(),e=document.getElementById("cart__container"),r=document.getElementById("cart__counter"),s=this.getLocal()||[];this.cart.setProducts(s),r.textContent=this.cart.size();for(let r of t)e.innerHTML+=this.cartItemMarkup(r)}localExists(t){return null!==localStorage.getItem(t)}clearAt(t){t.innerHTML=""}},r=document.getElementById("products__container"),s=document.getElementById("cart"),a=document.getElementById("cart__panel"),o=document.getElementById("cart__close"),i=document.getElementById("cart__counter"),n=document.getElementById("cart__container"),c=document.getElementById("categories"),d=document.getElementById("search"),l=document.getElementById("cart__total");s.addEventListener("click",(()=>{a.classList.add("cart__open")})),o.addEventListener("click",(()=>{a.classList.remove("cart__open")})),d.addEventListener("input",(()=>{clearTimeout(null),timeout=setTimeout((function(){const{value:t}=d;if(""===t)e.filterByUI("todo",r);else{let s=e.filterByName(t);if(0==s.length)return void Toastify({text:"No se encontr√≥ ningun producto con ese nombre üòí",duration:4e3,gravity:"bottom",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast();e.renderItemsAt(s,r)}}),1e3)})),d.addEventListener("change",(()=>{console.log(d.value)})),c.addEventListener("click",(t=>{const{target:s}=t;s.closest(".category")&&(document.querySelector(".btn-orange").classList.remove("btn-orange"),s.classList.add("btn-orange"),e.filterByUI(s.textContent,r))})),n.addEventListener("click",(t=>{const{target:r}=t;if(r.closest(".delete")){let t=r.closest(".cart__item"),s=t.dataset.cartId;e.removeFromCart(s),e.removeFromCartUI(t,n),Toastify({text:"Producto eliminado del carrito üëª",duration:4e3,gravity:"bottom",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #f85032, #e73827);)"}}).showToast()}})),r.addEventListener("click",(t=>{const{target:r}=t;if(r.closest(".card__button-add")){let t=r.closest(".card").dataset.productId;e.addToCart(t),e.addToCartFromUi(i,n,l),Toastify({text:"Producto a√±adido al carrito üòé",duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}})),document.addEventListener("DOMContentLoaded",(()=>{e.renderStoreAt(r)}))})();